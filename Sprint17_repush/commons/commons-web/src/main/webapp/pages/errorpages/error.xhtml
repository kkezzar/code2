<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--[if lt IE 7]> <html class="ie6 oldie"> <![endif]-->
<!--[if IE 7]>    <html class="ie7 oldie"> <![endif]-->
<!--[if IE 8]>    <html class="ie8 oldie"> <![endif]-->
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<f:view contentType="text/html" locale="fr">
	<h:head>
		<f:facet name="first">
			<meta http-equiv="X-UA-Compatible" content="IE=edge" />
			<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
			<meta name="viewport" content="width=device-width, initial-scale=1" />
			<title>Erreur - Progres</title>
		</f:facet>

		<f:facet name="middle">
			<h:outputStylesheet name="css/bootstrap.min.css" />
			<h:outputStylesheet name="css/font-awesome.min.css" />
			<h:outputStylesheet name="css/progres-production.css" />
			<h:outputStylesheet name="css/jquery.ui.css" />
		</f:facet>

		<f:facet name="last">
		</f:facet>
	</h:head>

	<h:body styleClass="progres-style-2">

		<header id="header">
		<div id="logo-group">

			<!-- PLACE YOUR LOGO HERE -->

			<span id="logo"> <a href="#"><img
					src="#{facesContext.externalContext.request.contextPath}/images/logo2.png"
					alt="Progres" /> </a>
			</span>
		</div>
		</header>

		<div class="row">
			<div class="col-md-12">
				<h1>Erreur</h1>
				<!-- production mode -->
				<p:outputPanel rendered="#{applicationBean.production}">
					<blockquote>
						<strong><h:outputText value="#{errorHandlerBean.message}"></h:outputText></strong>
						<br /> 
						<small>Code message: <strong>#{errorHandlerBean.statusCode}</strong></small>
						<a href="#{request.contextPath}/pages/index.xhtml"
							class="btn btn-primary btn-xs"><i class="fa fa-home"></i> Accueil</a>
					</blockquote>
				</p:outputPanel>

				<!-- development mode -->
				<p:outputPanel rendered="#{applicationBean.production eq false}">
					<blockquote>
						<h:outputLabel value="User agent:" />
						<strong><h:outputText value="#{header['user-agent']}" /></strong>
						<br />
						<h:outputLabel value="IP:" />
						<strong><h:outputText value="#{request.remoteAddr}" /></strong>
						<br />
						<h:outputLabel value="URI:" />
						<strong><h:outputText value="#{requestScope['javax.servlet.error.request_uri']}" /></strong>
						<br />
						<h:outputLabel value="Ajax:" />
						<strong><h:outputText value="#{facesContext.partialViewContext.ajaxRequest ? 'Oui' : 'Non'}" /></strong>

						<br />
						<h:outputLabel value="Exception type:" />
						<strong><h:outputText value="#{errorHandlerBean.exceptionType}" /></strong>
						
						<br />
						<h:outputLabel value="Exception message:" />
						<strong><h:outputText  styleClass="text-danger" value="#{errorHandlerBean.message}" /></strong>
						
						<br />
						<h:outputLabel value="Stacktrace:&nbsp;" />
						<pre>#{errorHandlerBean.printStackTrace(requestScope['javax.servlet.error.exception'])}</pre>
		
						<small>Code message: <strong>#{errorHandlerBean.statusCode}</strong></small>
						<a href="#{request.contextPath}/pages/index.xhtml"
							class="btn btn-primary btn-xs"><i class="fa fa-home"></i> Accueil</a>
						
					</blockquote>
		
				</p:outputPanel>

				<!-- 
				<blockquote>
				<h:outputText value="Error Code: #{errorHandlerBean.statusCode}"></h:outputText>
				<br />
				<h:outputLabel value="Description:&nbsp;" />
				<h:outputText value="#{errorHandlerBean.message}"></h:outputText>
				</blockquote>
				<p:outputPanel rendered="#{applicationBean.production eq false}">
					DÃ©tail de l'exception: 
					<pre>
					<h:outputText value="Exception Type: #{errorHandlerBean.exceptionType}"></h:outputText><br />
					<h:outputText value="Request URI : #{errorHandlerBean.requestURI}"></h:outputText><br />
					<h:outputText value="Exception Calss: #{errorHandlerBean.exception}"></h:outputText></pre>
					
					Stack trace: <pre><code>#{errorHandlerBean.printStackTrace(requestScope['javax.servlet.error.exception'])}</code></pre>
				</p:outputPanel>
				-->
			</div>
		</div>

	</h:body>
</f:view>
</html>