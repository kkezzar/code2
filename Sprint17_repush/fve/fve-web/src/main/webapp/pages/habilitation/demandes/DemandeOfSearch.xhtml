<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:of="http://java.sun.com/jsf/composite/components/of">
	
<ui:composition template="/templates/fullPageLayout.xhtml">

	<ui:define name="centerContent">
	<h:form id="form_demandeOfSearch">
	<p:panel id="pnl_demandeSubmit" header="#{demandeHabilitationMsgs.demande_habilitation_soumettre_title}">
  
			
			<!--  
				<p:panelGrid id="panelLocalisation" style="width:815px">
      							<f:facet name="header">  
      								<p:row>
      										<p:column>#{demandeHabilitationMsgs.demande_habilitation_of_domaine}</p:column>
				      						<p:column>#{demandeHabilitationMsgs.demande_habilitation_of_filiere}</p:column>
				      						<p:column>#{demandeHabilitationMsgs.demande_habilitation_of_specialite}</p:column>
      								</p:row>
      							</f:facet>  
      							
      							<p:row>
      									<p:column style="width:250px" >
			      	    						<p:selectOneMenu id="selectDomaine"
								value="#{sessionBeanFve.ofSearchDto.refCodeDomaine}" 
								label="#{demandeHabilitationMsgs.demande_habilitation_of_domaine}">	
								   <f:selectItem
									itemLabel="#{demandeHabilitationMsgs.demande_habilitation_select_of_domaine}"
									itemValue="" />							
								<f:selectItems value="#{demandeHabBean.listDomaines}" />
								<p:ajax listener="#{demandeHabBean.domainChanged}"
									update="listFilieresID listSpecialitesID" />
							
							</p:selectOneMenu>
										</p:column>
										
										<p:column style="width:250px" >
			      	    						<p:selectOneMenu id="listFilieresID" 
								value="#{sessionBeanFve.ofSearchDto.refCodeFiliere}" 
								label="#{demandeHabilitationMsgs.demande_habilitation_of_filiere}">	
								  <f:selectItem
									itemLabel="#{demandeHabilitationMsgs.demande_habilitation_select_of_filiere}"
									itemValue="#{demandeHabilitationMsgs.demande_habilitation_select_of_filiere}" />								
								<f:selectItems value="#{demandeHabBean.listFilieres}" />
								<p:ajax listener="#{demandeHabBean.filiereChanged}" 
									update="listSpecialitesID" />
							</p:selectOneMenu>
										</p:column>
					
										<p:column style="width:250px" >
			      	    						<p:selectOneMenu id="listSpecialitesID" 
								value="#{sessionBeanFve.ofSearchDto.refCodeSpecialite}" 
								label="#{demandeHabilitationMsgs.demande_habilitation_of_specialite}">		
								  <f:selectItem
									itemLabel="#{demandeHabilitationMsgs.demande_habilitation_select_of_specialite}"
									itemValue="#{demandeHabilitationMsgs.demande_habilitation_of_specialite}" />							
								<f:selectItems value="#{demandeHabBean.listSpecialites}" />
							</p:selectOneMenu>
		 								</p:column>
		 					 
		 						</p:row>
        			</p:panelGrid>

						
								
							
		     					
						
							<p:commandButton id="submitSearch"	ajax="true" 	icon="ui-icon-search" 	onstart="PF('blockUIWidget').block()"
							oncomplete="PF('blockUIWidget').unblock()"						
								value="#{commonmsgs.bouton_rechercher}"
								actionListener="#{demandeHabBean.findOffres}" update="OfResultSearchDataTable">								
							</p:commandButton>	
							
					
			-->
			<p:fieldset id="OfSearchResult"  legend="#{demandeHabilitationMsgs.demande_habilitation_selection_OF_title}" styleClass="mesrsFieldset" >

						<p:dataTable id="OfResultSearchDataTable" var="of"
					resizableColumns="true" 
					rendered="#{demandeHabBean.ofResultSearch!=null}"
					value="#{demandeHabBean.ofResultSearch}" 
					paginator="true" paginatorPosition="bottom"
					emptyMessage="#{ofSearchMsgs.SEARCH_OF_DATA_TABLE_SEACRH_RESULT_NO_RESULT}" rows="10" rowIndexVar="rowIndex"
					paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {CurrentPageReport}"
					currentPageReportTemplate="({startRecord} - {endRecord} sur {totalRecords})  " style="margin:8px"
								>													
								<f:facet name="header">  
            								#{demandeHabilitationMsgs.demande_habilitation_table_result_title}
       						 	</f:facet>  
											<p:column	headerText="#{ofSearchMsgs.SEARCH_OF_DATA_TABLE_SEACRH_RESULT_COLUMN_INDEX}" style="width:10px">
														<h:outputText value="#{rowIndex+1}" />
											</p:column>
				
											<p:column   	headerText="#{ofSearchMsgs.SEARCH_OF_DATA_TABLE_SEACRH_RESULT_COLUMN_CODE}" style="width:60px">
														<h:outputText value="#{of.code}" />
											</p:column>
											
											<p:column 	headerText="#{ofSearchMsgs.SEARCH_OF_DATA_TABLE_SEACRH_RESULT_COLUMN_LABEL_FR}" styleClass="textOnLeft" style="width:300px">
														<h:outputText value="#{of.i18nDtos['fr'].libelle}"  />
											</p:column>
					
					                         <p:column 	headerText="#{ofSearchMsgs.SEARCH_OF_DATA_TABLE_SEACRH_RESULT_COLUMN_DOMAIN_FR}" styleClass="textOnLeft" style="width:200px">
														<h:outputText value="#{of.i18nDtos['fr'].libelleDomaine}" />
											</p:column>
											
											<p:column 	headerText="#{ofSearchMsgs.SEARCH_OF_DATA_TABLE_SEACRH_RESULT_COLUMN_DEGREE_FR}" styleClass="textOnLeft" style="width:200px">
														<h:outputText value="#{of.i18nDtos['fr'].libelleFiliere}" />
											</p:column>
											<p:column 	headerText="#{ofSearchMsgs.SEARCH_OF_DATA_TABLE_SEACRH_RESULT_COLUMN_SPECIALITY_FR}" styleClass="textOnLeft"  style="width:200px">
														<h:outputText value="#{of.i18nDtos['fr'].libelleSpecialite}" />
											</p:column>
									
											
												
											<p:column 	headerText="#{ofSearchMsgs.SEARCH_OF_DATA_TABLE_SEACRH_RESULT_COLUMN_CYCLE_FR}" style="width:60px">
														<h:outputText value="#{of.i18nDtos['fr'].libelleCycle}" />
											</p:column>
				<!--  
											<p:column 	headerText="#{ofSearchMsgs.SEARCH_OF_DATA_TABLE_SEACRH_RESULT_COLUMN_TYPE_FR}" style="width:50px">
														<h:outputText value="#{searchOf.getNomeclatureByCode('LMD_TYPE_FORMATION',of.refCodeTypeFormation).libelleLongFr}" />
											</p:column>
											-->
											<!--  
											<p:column	 headerText="#{ofSearchMsgs.SEARCH_OF_DATA_TABLE_SEACRH_RESULT_COLUMN_CREATION_DATE}"  style="width:110px">
														<h:outputText value="#{of.dateCreation}">
														<f:convertDateTime pattern="dd-MM-yyyy HH:mm:ss" />
														</h:outputText>
											</p:column>
											
											<p:column 	headerText="#{ofSearchMsgs.SEARCH_OF_DATA_TABLE_SEACRH_RESULT_COLUMN_MODIFICATION_DATE}"  style="width:110px">
														<h:outputText value="#{of.dateModification}">
														<f:convertDateTime pattern="dd-MM-yyyy HH:mm:ss" />
														</h:outputText>
											</p:column>
											-->		
											
											<p:column  style="width:80px" exportable="false">
													
														<p:commandButton 
																	id="detailButtonID" onstart="PF('blockUIWidget').block()"
							oncomplete="PF('blockUIWidget').unblock()"
																	value="#{commonmsgs.bouton_soumettre}"  
																	ajax="true"
																	action="#{demandeHabBean.toSubmit}"  	>
																<f:param name="resultSize" value="#{demandeHabBean.resultSize}"></f:param>
																<f:param name="editionMode" value="detail" />
																<f:param name="ofId" value="#{of.id}" />
														</p:commandButton>
				
											</p:column>
		
						</p:dataTable>
					</p:fieldset>
												
			<p:growl id="msgs" showDetail="true" autoUpdate="true"  closable="true" life="5000"/>	
 		
 	
            <p:toolbar  style="margin-top:5px"  >
				
					<p:toolbarGroup    align="left">
								<p:commandButton value="#{commonmsgs.bouton_retour}" action="goBack"  immediate="true" >
										
        						</p:commandButton>  
        			</p:toolbarGroup>
					
					
					
		</p:toolbar>
				
 	
	
				
			</p:panel>
		</h:form>
	</ui:define>
</ui:composition>
</html>