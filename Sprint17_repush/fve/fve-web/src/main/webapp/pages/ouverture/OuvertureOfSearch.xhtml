
	
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:pe="http://primefaces.org/ui/extensions">
	
<ui:composition template="/templates/fullPageLayout.xhtml">

	<ui:define name="centerContent">
	<h:form id="form_ouvertureOfgestion">
	<p:panel id="pnl_ouvertureOfgestion" header="#{ouvertureOfMsgs.ouverture_gestion_title}">
	<p:growl id="msgs" showDetail="true" autoUpdate="true"  closable="true" life="5000"/>	
 <p:fieldset id="OuvertureSearch"  legend="#{commonmsgs.bouton_rechercher}" styleClass="mesrsFieldset" >
<p:panelGrid style="margin-top:5px;width:850px;">
						<f:facet name="header">
							<p:row>
								<p:column>
						<h:outputText value="#{ouvertureOfMsgs.ouverture_annee_academique} " />
						</p:column>
						<!--  
						<p:column>
								<h:outputText
							value="#{ouvertureOfMsgs.ouverture_etablissement} " />
					</p:column>
					-->
					<p:column>
								<h:outputText
							value="#{ouvertureOfMsgs.ouverture_offre_formation} " />
						</p:column>
						<p:column>
						<h:outputText
							value="#{ouvertureOfMsgs.ouverture_ouverte} " />
						</p:column>
							</p:row>
						</f:facet>

						
<p:row>

						
						<p:column>
						<p:selectOneMenu id="selectAnnee" filter="true"
								filterMatchMode="startsWith"
								value="#{sessionBeanFve.ouvertureOfSearchDto.anneeAcademiqueId}" 
								label="#{ouvertureOfMsgs.ouverture_annee_academique}">
					
					<f:selectItem
									itemLabel="#{ouvertureOfMsgs.ouverture_select_annee_academique}"
									itemValue="" />							
								<f:selectItems value="#{ouvertureOfSearchBean.listeAnneeAcademiques}" />
								
							
							</p:selectOneMenu>
							</p:column>
						
					<!--  	
					<p:column>
						<p:selectOneMenu id="selectEtab"
								value="#{sessionBeanFve.ouvertureOfSearchDto.refCodeEtablissement}" 
								label="#{ouvertureOfMsgs.ouverture_etablissement}">
					          <f:selectItem
									itemLabel="#{ouvertureOfMsgs.ouverture_select_etab}"
									itemValue="" />		
														
								<f:selectItems value="#{ouvertureOfSearchBean.listeEtabs}" />
								
							
							</p:selectOneMenu>
					</p:column>
						-->
						
						<p:column>	
					     <p:selectOneMenu id="selectOf"  filter="true"
								filterMatchMode="startsWith"
								value="#{sessionBeanFve.ouvertureOfSearchDto.offreFormationId}" 
								label="#{ouvertureOfMsgs.ouverture_offre_formation}">
					<f:selectItem
									itemLabel="#{ouvertureOfMsgs.ouverture_select_of}"
									itemValue="" />							
								<f:selectItems value="#{ouvertureOfSearchBean.listeOffres}" />
							</p:selectOneMenu>
							</p:column>
						
						<p:column>
							<p:selectBooleanCheckbox id="estouverte"
							value="#{ouvertureOfSearchBean.ouvertureOfSearchDto.estOuverte}"
							
							>
						</p:selectBooleanCheckbox>
						</p:column>
						<p:column>
							<p:commandButton value="#{commonmsgs.bouton_rechercher}"  	id="btnSearch"  title="#{commonmsgs.bouton_rechercher}"
												update="OuvertureOfSearchResult" 	icon="ui-icon-search"  
												actionListener="#{ouvertureOfSearchBean.init}" onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
												></p:commandButton>
							</p:column>
					</p:row>
				</p:panelGrid>
				<p:toolbar styleClass="toolBarMesrs" style="width:850px;">
						<p:toolbarGroup    align="left">
				
									
										
						
						</p:toolbarGroup>
						</p:toolbar>
				</p:fieldset>
				<br></br>
					<p:fieldset id="OuvertureOfSearchResult"  legend="#{ouvertureOfMsgs.ouverture_resultat_recherche}" styleClass="mesrsFieldset" >

						<p:dataTable id="ouvertureResultSearchDataTable" var="ouvertureof"
					resizableColumns="false" 
					rowIndexVar="rowIndex" 
					value="#{ouvertureOfSearchBean.ouvertureOfResultSearch}" 
					paginator="true" paginatorPosition="bottom"
					emptyMessage="#{ofSearchMsgs.SEARCH_OF_DATA_TABLE_SEACRH_RESULT_NO_RESULT}" rows="10"
					paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {CurrentPageReport}"
					currentPageReportTemplate="({startRecord} - {endRecord} sur {totalRecords})  " style="margin:8px"
								>													
								<f:facet name="header">  
            								       						 	</f:facet>  
											
		 
											<p:column	headerText="#{ofSearchMsgs.SEARCH_OF_DATA_TABLE_SEACRH_RESULT_COLUMN_INDEX}" width="5%">
														<h:outputText value="#{rowIndex+1}" styleClass="labelValue" > </h:outputText>
											</p:column>
				                            <p:column   	headerText="#{ouvertureOfMsgs.ouverture_annee_academique}" >
														<h:outputText value="#{ouvertureof.anneeAcademiquePremiereAnnee}/#{ouvertureof.anneeAcademiqueDeuxiemeAnnee}" width="15%" styleClass="labelValue" > </h:outputText>
											</p:column>
											<p:column   	headerText="#{ouvertureOfMsgs.ouverture_etablissement}" width="20%" >
														<h:outputText value="#{ouvertureof.refCodeEtablissement}" styleClass="labelValue" > </h:outputText>
											</p:column>
											<p:column   	headerText="#{ouvertureOfMsgs.ouverture_offre_formation}" width="20%">
														<h:outputText value="#{ouvertureof.offreFormationlibelle}" styleClass="labelValue" > </h:outputText>
											</p:column>
											
											<p:column   	headerText="#{ouvertureOfMsgs.ouverture_situation}" width="15%">
														<h:outputText value="#{ouvertureof.estOuverte==true ? 'ouverte': 'fermÃ©e'}"  styleClass="labelValue" > </h:outputText>
											</p:column>
											<p:column   	headerText="#{ouvertureOfMsgs.ouverture_date_ouverture}" width="15%">
														<h:outputText value="#{ouvertureof.dateOuverture}"  styleClass="labelValue" > <f:convertDateTime pattern="dd-MM-yyyy HH:mm:ss" /></h:outputText>
											</p:column>
											<p:column   	headerText="#{ouvertureOfMsgs.ouverture_date_fermeture}" width="15%">
														<h:outputText value="#{ouvertureof.dateFermeture}"  styleClass="labelValue" > <f:convertDateTime pattern="dd-MM-yyyy HH:mm:ss" /></h:outputText>
											</p:column>
											<p:column  style="width:80px" exportable="false">
													
														<p:commandButton 
																	id="updateButtonID" onstart="PF('blockUIWidget').block()"
							oncomplete="PF('blockUIWidget').unblock()"
																	value="#{commonmsgs.bouton_update}"  
																	ajax="true"
																	
																	action="#{ouvertureOfBean.toUpdate}"  	>															
																<f:param name="editionMode" value="detail" />
																<f:param name="ofId" value="#{ouvertureof.offreFormationId}" />
																<f:param name="ouvertureOfId" value="#{ouvertureof.id}" />
														</p:commandButton>
				
											</p:column>
		
						</p:dataTable>
					</p:fieldset>
					
					
			</p:panel>
			 <pe:blockUI widgetVar="blockUIWidget">
			<h:panelGrid columns="2">
				<h:graphicImage value="/resources/images/ajax-loader1.gif"
					style="margin-right: 12px; vertical-align: middle;" />
				<h:outputText value="#{commonmsgs.msg_wait}"
					style="white-space: nowrap;" />
			</h:panelGrid>
		</pe:blockUI>
		</h:form>
	</ui:define>
</ui:composition>
</html>