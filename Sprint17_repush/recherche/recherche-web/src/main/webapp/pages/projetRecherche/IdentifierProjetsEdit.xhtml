<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:cmp="http://java.sun.com/jsf/composite/components/referentiel"
	xmlns:ccmp="http://java.sun.com/jsf/composite/components">

<ui:composition template="/templates/fullPageLayout.xhtml">

<!-- TITRE PAGE -->
<ui:define name="pageTitleContent">#{rchProjetsMsgs.Projets_recherche_page_manage_title}</ui:define>

<!-- CONTENU PAGE -->
<ui:define name="centerContent">

<h:form id="mainForm">
<!-- RECHERCHE PROJET DE RECHERCHE -->
	<p:toolbar style="margin-buttom:8px">
	<p:toolbarGroup    align="left">
		 <ccmp:SearchComponent id="cmpSearchProjetID" 
						  searchKeyWords="#{identifierProjetMB.searchComponentKeyWords}" 
						  searchGenericMethodName="#{identifierProjetMB.searchProjets()}"
						  searchAdvancedMethodName="#{identifierProjetMB.searchProjets()}"
						  toUpdateOnSearch=":mainForm"
						  txtKeyWordWidth="400"
						  ajaxProgessId="ajaxprogress"
						  textWatermark="#{rchProjetsMsgs.projet_recherche_search_text_key_words}">
		  </ccmp:SearchComponent>
	</p:toolbarGroup> 
	<p:toolbarGroup align="right">
		<p:commandButton id="btnAddProjet" 
									value="#{rchProjetsMsgs.projets_recherche_button_add_projet_label}" 
									action="#{identifierProjetMB.prepareAddProjet() }"
									process="@this"
									update="mainForm"
									icon="ui-icon-plusthick">
		</p:commandButton>
	</p:toolbarGroup>
	</p:toolbar>
	<br />
<!-- LISTE PROJET DE RECHERCHE -->
	<p:dataTable id="projetDataTable" var="row"
							value="#{identifierProjetMB.listprojet}"
							rowKey="#{row.id}"
							emptyMessage="#{rchProjetsMsgs.projet_recherche_datatable_list_empty}"
							rowIndexVar="rowIndex"
							selection="#{identifierProjetMB.selectedProjet}"
							selectionMode="single"
							currentPageReportTemplate="{startRecord} - {endRecord} sur {totalRecords}"
        					paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"								
        					paginator="true" 
							rows="5" 
							paginatorPosition="bottom"
							rowsPerPageTemplate="5,10"
							style="margin-bottom:8px;">
				<p:ajax event="rowSelect" listener="#{identifierProjetMB.onProjetRowSelect}" update=":mainForm"	
							onstart="PF('ajaxprogress').block()"  oncomplete="PF('ajaxprogress').unblock()"/>
				<f:facet name="header">#{rchProjetsMsgs.programmes_circuits_validation_datatable_list_processus_default}</f:facet>
				<p:column	headerText="" style="text-align:center;width:30px;"> 	<h:outputText value="#{rowIndex+1}"/> </p:column>
				
				<p:column headerText="#{rchProjetsMsgs.projet_recherche_datatable_list_column_code}">
				<h:outputText value="#{row.code}" style="color:#336699;"/>
				</p:column>
				<p:column headerText="#{rchProjetsMsgs.projet_recherche_datatable_list_column_intitule}">
				<h:outputText value="#{row.intituleFr}" style="color:#336699;"/>
				</p:column>
				<p:column headerText="#{rchProjetsMsgs.projet_recherche_datatable_list_column_programme}">
				<h:outputText value="#{row.programeDto.code}" style="color:#336699;"/>
				</p:column>
				<p:column headerText="#{rchProjetsMsgs.projet_recherche_datatable_list_column_date_debut}">
				<h:outputText value="#{row.dateDebutPrev}" style="color:#336699; "><f:convertDateTime pattern="dd/MM/yyyy" /></h:outputText>
				</p:column>
				<p:column headerText="#{rchProjetsMsgs.projet_recherche_datatable_list_column_date_fin}" >
				<h:outputText value="#{row.dateFinPrev}" style="color:#336699;"><f:convertDateTime pattern="dd/MM/yyyy" /></h:outputText>
				</p:column>
				<p:column headerText="#{rchProjetsMsgs.projet_recherche_datatable_list_column_situation}" >
				<h:outputText value="#{row.situationDto.libelleSituation}" style="color:#336633;">/</h:outputText>
				</p:column>
	</p:dataTable>
		
<!-- detail PROJET DE RECHERCHE -->

<p:outputPanel id="projetPanelDetails"   >
	<p:panel header="#{programmeBB.titleDetailsProgram}" rendered="#{identifierProjetMB.canShowPjetDetails}" style="margin-bottom:8px;">
	 <p:tabView orientation="left" id="tvProjet">
     <p:tab title="#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_identification}">   
	<p:panelGrid  id="panelGridProjetEdit" style="width:100%;margin-bottom:8px;">
	                  <p:row>
                         <p:column colspan="4" styleClass="title">#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_identification}</p:column>
                      </p:row>
                                                                
	                 <p:row>
						<p:column style="width:20%;text-align:right;"><p:outputLabel value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_code}" /></p:column>
						<p:column colspan="3"><h:outputText id ="txtCodeProgjet" value="#{identifierProjetMB.selectedProjet.code}" styleClass="value"/>	</p:column>
					
					
					</p:row>
					
					
					<p:row>
						<p:column style="width:20%;text-align:right;"><p:outputLabel value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_date_identification}" for="txtidentProgjet"/></p:column>
						<p:column colspan="3"> <p:calendar id ="txtidentProgjet"   value="#{identifierProjetMB.selectedProjet.dateIdentification}"  pattern="dd/MM/yyyy" required="true"	 
						    requiredMessage="#{rchProjetsMsgs.projet_recherche_datatable_list_column_date_fin_previsionnelle}"/></p:column>
					</p:row>
					<p:row>
						<p:column style="width:20%;text-align:right;"><p:outputLabel value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_intitule}" for="txtintituleProgjet"/></p:column>
						<p:column colspan="3"><p:inputText id ="txtintituleProgjet" value="#{identifierProjetMB.selectedProjet.intituleFr}" required="true" requiredMessage="#{rchProjetsMsgs.projet_recherche_datatable_list_column_intitule}" style="width:100%;" />	</p:column>
					</p:row>
					<p:row>
						<p:column style="text-align:right;"><p:outputLabel value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_programme}" for="TypesProgramsEditID"/></p:column>
						<p:column colspan="3">
							<p:selectOneMenu id="TypesProgramsEditID" 	value="#{identifierProjetMB.typeProgrammeId}" style="width:100%;" 
								required="true" requiredMessage="#{rchProjetsMsgs.projet_recherche_datatable_list_column_programme}">
								<f:selectItem itemLabel="#{rchProjetsMsgs.projets_recherche_list_programmes_select}"		itemValue="" />
								<f:selectItems value="#{identifierProjetMB.listProgramsTypes}" var="y" 	itemLabel="#{y.label}" itemValue="#{y.value}" />
						</p:selectOneMenu>
						</p:column>
	                </p:row>
					 <p:row>
						<p:column style="width:20%;text-align:right;"><p:outputLabel value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_structure}" for="structID"/></p:column>						
					<p:column colspan="3">
							<p:selectOneMenu id="structID" 	value="#{identifierProjetMB.structureId}"  style="width:100%;" 
								required="true" requiredMessage="#{rchProjetsMsgs.projet_recherche_datatable_list_column_structure}">
								<p:ajax 	update="GroupesID"	partialSubmit="true"  
										listener="#{identifierProjetMB.initListes}" 
										onstart="PF('page').block()" onsuccess="PF('page').unblock()" />
								<f:selectItem itemLabel="#{rchProjetsMsgs.projets_recherche_list_structures_select}"		itemValue="" />
								<f:selectItems value="#{identifierProjetMB.listStructureTypes}" var="y" 	itemLabel="#{y.label}" itemValue="#{y.value}"  />
						</p:selectOneMenu>
						</p:column>					
					</p:row>
					
					<p:row>
						<p:column style="text-align:right;"><h:outputText value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_group_recherche}" for="GroupesID"/></p:column>
						<p:column colspan="3">
							<p:selectOneMenu id="GroupesID" 	value="#{identifierProjetMB.groupeId}"  style="width:100%;" 
								required="true" requiredMessage="#{rchProjetsMsgs.projet_recherche_datatable_list_column_group_recherche}">								
								<p:ajax 	update="themesID"	partialSubmit="true"  
										listener="#{identifierProjetMB.initListThemes()}" 
										onstart="PF('page').block()" onsuccess="PF('page').unblock()" />
								<f:selectItem itemLabel="#{rchProjetsMsgs.projets_recherche_list_groupes_select}"		itemValue="" />										
								<f:selectItems value="#{identifierProjetMB.listGroupes}" var="y" 	itemLabel="#{y.label}" itemValue="#{y.value}" />
						</p:selectOneMenu>
						</p:column>
				   </p:row>					
					<p:row>
						<p:column style="text-align:right;"><h:outputText value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_theme_recherche}" for="themesID"/></p:column>
						<p:column colspan="3">
							<p:selectOneMenu id="themesID" 	value="#{identifierProjetMB.themeId}"  style="width:100%;" 
								required="true" requiredMessage="#{rchProjetsMsgs.projet_recherche_datatable_list_column_theme_recherche}">
								<f:selectItem itemLabel="#{rchProjetsMsgs.projets_recherche_list_themes_select}"		itemValue="" />
								<f:selectItems value="#{identifierProjetMB.listThemes}" var="y" 	itemLabel="#{y.label}" itemValue="#{y.value}" />
						</p:selectOneMenu>
						</p:column>
				   </p:row>	
					<p:row>
						<p:column style="width:20%;text-align:right;"><p:outputLabel value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_objectifs}" for="txtobjectifProgjet"/></p:column>
						<p:column colspan="3"><p:inputText id ="txtobjectifProgjet" value="#{identifierProjetMB.selectedProjet.objectif}" required="true" requiredMessage="#{rchProjetsMsgs.projet_recherche_datatable_list_column_objectifs}" style="width:100%;" />	</p:column>
					</p:row>
					<p:row>
						<p:column style="width:20%;text-align:right;"><p:outputLabel value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_justification}" for="txtjustificatifProgjet"/></p:column>
						<p:column colspan="3"><p:inputText id ="txtjustificatifProgjet" value="#{identifierProjetMB.selectedProjet.justification}" required="true" requiredMessage="#{rchProjetsMsgs.projet_recherche_datatable_list_column_justification}" style="width:100%;" />	</p:column>
					</p:row>
					<p:row>
						<p:column style="width:20%;text-align:right;"><p:outputLabel value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_date_debut_previsionelle}" for="txtdatedebutprevProgjet"/></p:column>
						<p:column colspan="3">						
						<p:calendar value="#{identifierProjetMB.selectedProjet.dateDebutPrev}"  pattern="dd/MM/yyyy" required="true"	 id ="txtdatedebutprevProgjet"
										requiredMessage="#{rchProjetsMsgs.projet_recherche_datatable_list_column_date_debut_previsionelle}"/>  						                                    
						 </p:column>
					</p:row>
					<p:row>
						<p:column style="width:20%;text-align:right;"><p:outputLabel value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_date_fin_previsionnelle}" for="txtdatefinprevProgjet"/></p:column>
						<p:column colspan="3">					
					    <p:calendar value="#{identifierProjetMB.selectedProjet.dateFinPrev}"  pattern="dd/MM/yyyy" required="true"	 id ="txtdatefinprevProgjet"
										requiredMessage="#{rchProjetsMsgs.projet_recherche_datatable_list_column_date_fin_previsionnelle}"/>
					   </p:column>					
					</p:row>		
	
	</p:panelGrid>
	<p:toolbar style="margin-buttom:8px">
	<p:toolbarGroup align="left">
	<p:commandButton id="saveProjetButtonID" 
							action="#{identifierProjetMB.saveProjet()}"  icon="ui-icon-disk"  
							value = "#{rchProjetsMsgs.projets_recherche_button_dialog_enregistrer_projets}"
							process="@this :mainForm:tvProjet:panelGridProjetEdit" 		ajax="true"		
							update=":mainForm:projetDataTable :mainForm:tvProjet :mainForm:msgProgram"					
							onstart="PF('ajaxprogress').block()"  oncomplete="PF('ajaxprogress').unblock()">
	</p:commandButton>
		<!---->
		</p:toolbarGroup>
		<p:toolbarGroup align="right">
		<p:commandButton id="soumettreValProjetButtonID" disabled="#{not identifierProjetMB.toEditProjetDialog}"
							action="#{identifierProjetMB.soumettreValidationProjet()}"  icon="ui-icon-disk"  
							value = "#{rchProjetsMsgs.projets_recherche_button_dialog_soumettre_validation}"
							process="@this :mainForm" 	ajax="true"		
							update=":mainForm"					
							onstart="PF('ajaxprogress').block()"  oncomplete="PF('ajaxprogress').unblock()">
	</p:commandButton>
	</p:toolbarGroup>
	</p:toolbar>
	
	</p:tab>
		
	<p:tab id="activiteTab" title="#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_activites}" disabled="#{not identifierProjetMB.toEditProjetDialog}">
	
	<p:toolbar id="activitesToolBar" style="margin-bottom:8px;">
					<p:toolbarGroup align="right">
						<p:commandButton id="btnAddActivite" 
									action="#{identifierProjetMB.addActiviteProjet}"  
									icon="ui-icon-plusthick"  
									process="@this" 
									ajax="true"
									update=":dlgFormActivite"
									oncomplete="PF('dlgAddActivite').show();"
									>
						</p:commandButton>
					</p:toolbarGroup>
		</p:toolbar>	
	
	
	
	<p:dataTable id="activiteDataTable" var="row"
							value="#{identifierProjetMB.listActiviteProjet}"
							rowKey="#{row.id}"
							emptyMessage="#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_activites}"
							rowIndexVar="rowIndex"							
							currentPageReportTemplate="{startRecord} - {endRecord} sur {totalRecords}"
        					paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"								
        					paginator="true" 
							rows="5" 
							paginatorPosition="bottom"
							rowsPerPageTemplate="5,10"
							style="margin-bottom:8px;">
				<f:facet name="header">#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_activites}</f:facet>
				<p:column	headerText="" style="text-align:center;width:30px;"> 	<h:outputText value="#{rowIndex+1}"/> </p:column>
				<p:column headerText="#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_activites}" style="text-align:center;">
						<h:outputText value="#{row.activiteNomenclatureDto.libelleLongFr}" style="color:#336699;float:left;"/>
				</p:column>
				<p:column headerText="#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_designation}" style="text-align:center;">
						<h:outputText value="#{row.description}" style="color:#336699;float:left;"/>
				</p:column>
				<p:column headerText="#{rchProjetsMsgs.projet_recherche_datatable_list_column_date_debut}" style="text-align:center;">
						<h:outputText value="#{row.dateDebutPrev}" style="color:#336699;float:left;"><f:convertDateTime pattern="dd/MM/yyyy" /></h:outputText>
				</p:column>
				<p:column headerText="#{rchProjetsMsgs.projet_recherche_datatable_list_column_date_fin}" style="text-align:center;">
						<h:outputText value="#{row.dateFinPrev}" style="color:#336699;float:left;"><f:convertDateTime pattern="dd/MM/yyyy" /></h:outputText>
				</p:column>
				<p:column headerText="#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_resultat_attendue}" style="text-align:center;">
						<h:outputText value="#{row.resultatAttendu}" style="color:#336699;float:left;"/>
				</p:column>				
				<p:column style="text-align:center;width:32px;">
				<p:commandButton id="btnRemoveActivite"  	action="#{identifierProjetMB.removeActivite}" 
															 icon="ui-icon-trash" 
															ajax="true" 
															update=":mainForm:tvProjet:activiteDataTable"   
															process="@this">
								<p:confirm		header="#{rchProjetsMsgs.projets_recherche_msg_remove_activite_confirm_msg}"	
														message="#{rchProjetsMsgs.projets_recherche_msg_remove_activite_confirm_msg}" 	icon="ui-icon-alert" />
								<f:setPropertyActionListener target="#{identifierProjetMB.activiteId}" value="#{row.id}" />	
						</p:commandButton>
				</p:column>
				<p:column style="width:32px" >                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
           					<p:commandButton id="editActiviteButtonID" 	 
									icon="ui-icon-pencil" 
									action="#{identifierProjetMB.updateActivite()}" 
									process="@this"	
									update=":dlgFormActivite"
									oncomplete="PF('dlgAddActivite').show();">										
									<f:setPropertyActionListener target="#{identifierProjetMB.activiteId}" value="#{row.id}" />										
							</p:commandButton>
      			</p:column>
	</p:dataTable>
	<p:messages id="msgactivites" showDetail="true" showSummary="false" autoUpdate="false" closable="true"/>
	</p:tab>
	<p:tab  id="partenaireTab"    title="#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_partenaires}" disabled="#{not identifierProjetMB.toEditProjetDialog}">
	<p:toolbar id="partenairesToolBar" style="margin-bottom:8px;">
					<p:toolbarGroup align="right">
						<p:commandButton id="btnAddPartenaires" 
									action="#{identifierProjetMB.addPartenaireProjet}"  
									icon="ui-icon-plusthick"  
									process="@this" 
									ajax="true"
									update=":dlgFormPartenaires"
									oncomplete="PF('dlgAddPartenaires').show();"
									>
						</p:commandButton>
					</p:toolbarGroup>
		</p:toolbar>	
	<p:dataTable id="partenaireProjetDataTable" var="row"
							value="#{identifierProjetMB.listPartenaireProjet}"
							rowKey="#{row.id}"
							emptyMessage="#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_partenaires}"
							rowIndexVar="rowIndex"							
							currentPageReportTemplate="{startRecord} - {endRecord} sur {totalRecords}"
        					paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"								
        					paginator="true" 
							rows="5" 
							paginatorPosition="bottom"
							rowsPerPageTemplate="5,10"
							style="margin-bottom:8px;">
				<f:facet name="header">#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_partenaires}</f:facet>
				<p:column	headerText="" style="text-align:center;width:30px;"> 	<h:outputText value="#{rowIndex+1}"/> </p:column>
				<p:column headerText="#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_partenaires}" style="text-align:center;">
						<h:outputText value="#{row.partenaireDto.structureLibelleLatin}" style="color:#336699;float:left;"/>
				</p:column>
				<p:column headerText="#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_description}" style="text-align:center;">
						<h:outputText value="#{row.description}" style="color:#336699;float:left;"/>
				</p:column>
				<p:column style="text-align:center;width:32px;">
				<p:commandButton id="btnRemovePartenaire"  	action="#{identifierProjetMB.removePartenaire()}" 
															 icon="ui-icon-trash" 
															ajax="true" 
															update=":mainForm:tvProjet:partenaireProjetDataTable"   
															process="@this">
								<p:confirm		header="#{rchProjetsMsgs.projets_recherche_msg_remove_activite_confirm_msg}"	
														message="#{rchProjetsMsgs.projets_recherche_msg_remove_activite_confirm_msg}" 	icon="ui-icon-alert" />
								<f:setPropertyActionListener target="#{identifierProjetMB.partenaireId}" value="#{row.id}" />	
						</p:commandButton>
				</p:column>
				<p:column style="width:32px" >                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
           					<p:commandButton id="editPartenaireButtonID" 	 
									icon="ui-icon-pencil" 
									action="#{identifierProjetMB.updatePartenaire()}" 
									process="@this"	
									update=":dlgFormPartenaires"
									oncomplete="PF('dlgAddPartenaires').show();">										
									<f:setPropertyActionListener target="#{identifierProjetMB.partenaireId}" value="#{row.id}" />										
							</p:commandButton>
      			</p:column>
							
				
	</p:dataTable>
	<p:messages id="msgpartenaires" showDetail="true" showSummary="false" autoUpdate="false" closable="true"/>
	
	
	
	
	
	</p:tab>
	<p:tab id="motcleTab" title="#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_mots_clets}" disabled="#{not identifierProjetMB.toEditProjetDialog}">
	
	<p:toolbar id="MotcleToolBar" style="margin-bottom:8px;">
					<p:toolbarGroup align="right">
						<p:commandButton id="btnAddMotcle" 
									action="#{identifierProjetMB.addMotcle}"  
									icon="ui-icon-plusthick"  
									process="@this" 
									ajax="true"
									update=":dlgFormMotcle"
									oncomplete="PF('dlgAddMotcle').show();"
									>
						</p:commandButton>
					</p:toolbarGroup>
</p:toolbar>	
<p:dataTable id="motcleDataTable" var="row"
							value="#{identifierProjetMB.listMotcleDto}"
							rowKey="#{row.id}"
							emptyMessage="#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_mots_clets}"
							rowIndexVar="rowIndex"
							currentPageReportTemplate="{startRecord} - {endRecord} sur {totalRecords}"
        					paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"								
        					paginator="true" 
							rows="5" 
							paginatorPosition="bottom"
							rowsPerPageTemplate="5,10"
							style="margin-bottom:8px;">
				<f:facet name="header">#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_mots_clets}</f:facet>
				<p:column	headerText="" style="text-align:center;width:30px;"> 	<h:outputText value="#{rowIndex+1}"/> </p:column>
				<p:column headerText="#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_mots_clets}" style="text-align:center;">
						<h:outputText value="#{row.motCleNomenclatureDto.libelleLongFr}" style="color:#336699;float:left;"/>
				</p:column>	
			<p:column style="text-align:center;width:32px;">
				<p:commandButton id="btnRemoveMotcle"  	action="#{identifierProjetMB.removeMotcle}"
															 icon="ui-icon-trash" 
															ajax="true" 
															update=":mainForm:tvProjet:motcleDataTable"   
															process="@this">
								<p:confirm		header="#{rchProjetsMsgs.projets_recherche_msg_remove_activite_confirm_msg}"	
														message="#{rchProjetsMsgs.projets_recherche_msg_remove_activite_confirm_msg}" 	icon="ui-icon-alert" />
								<f:setPropertyActionListener target="#{identifierProjetMB.motcleId}" value="#{row.id}" />	
						</p:commandButton>
				</p:column>
				
	</p:dataTable>
	
	</p:tab>
	<p:tab  id="indevaluationTab" title="#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_indicateur_evaluation}" disabled="#{not identifierProjetMB.toEditProjetDialog}">
	
	<p:toolbar id="indEvaluationToolBar" style="margin-bottom:8px;">
					<p:toolbarGroup align="right">
						<p:commandButton id="btnAddindEvaluation" 
									action="#{identifierProjetMB.addindEvaluation}"  
									icon="ui-icon-plusthick"  
									process="@this" 
									ajax="true"
									update=":dlgFormindEvaluation"
									oncomplete="PF('dlgAddindEvaluation').show();"
									>
						</p:commandButton>
					</p:toolbarGroup>
		</p:toolbar>	
	
	
	
	<p:dataTable id="indevaluationDataTable" var="row"
							value="#{identifierProjetMB.listIndEvaluation}"
							rowKey="#{row.id}"
							emptyMessage="#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_indicateur_evaluation}"
							rowIndexVar="rowIndex"
							currentPageReportTemplate="{startRecord} - {endRecord} sur {totalRecords}"
        					paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"								
        					paginator="true" 
							rows="5" 
							paginatorPosition="bottom"
							rowsPerPageTemplate="5,10"
							style="margin-bottom:8px;">
				<f:facet name="header">#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_indicateur_evaluation}</f:facet>
				<p:column	headerText="" style="text-align:center;width:30px;"> 	<h:outputText value="#{rowIndex+1}"/> </p:column>
				<p:column headerText="#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_indicateur_evaluation}" style="text-align:center;">
						<h:outputText value="#{row.ncIndicateurDto.libelleLongFr}" style="color:#336699;float:left;"/>
				</p:column>	
				<p:column headerText="#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_type_apresiation}" style="text-align:center;">
						<h:outputText value="#{row.typeAppreciationDto.libelleLongFr}" style="color:#336699;float:left;"/>
				</p:column>			
				<p:column headerText="#{rchProjetsMsgs.projets_recherche_programme_detail_tabview_tab_valeur_prevu}" style="text-align:center;">
						<h:outputText value="#{row.valeurPrev}" style="color:#336699;float:left;"/>
				</p:column>
				
				<p:column style="text-align:center;width:32px;">
				<p:commandButton id="btnRemoveindevaluation" action="#{identifierProjetMB.removeindevaluation}" 
															 icon="ui-icon-trash" 
															ajax="true" 
															update=":mainForm:tvProjet:indevaluationDataTable"   
															process="@this">
								<p:confirm		header="#{rchProjetsMsgs.projets_recherche_msg_remove_activite_confirm_msg}"	
														message="#{rchProjetsMsgs.projets_recherche_msg_remove_activite_confirm_msg}" 	icon="ui-icon-alert" />
								<f:setPropertyActionListener target="#{identifierProjetMB.indevaluationId}" value="#{row.id}" />	
						</p:commandButton>
				</p:column>
				<p:column style="width:32px" >                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
           					<p:commandButton id="editindevaluationButtonID" 	 
									icon="ui-icon-pencil" 
									action="#{identifierProjetMB.updateindevaluation}" 
									process="@this"
									update=":dlgFormindEvaluation"
									oncomplete="PF('dlgAddindEvaluation').show();">										
									<f:setPropertyActionListener target="#{identifierProjetMB.indevaluationId}" value="#{row.id}" />										
							</p:commandButton>
							
      			</p:column>
	</p:dataTable>
	<p:messages id="msgindevaluations" showDetail="true" showSummary="false" autoUpdate="false" closable="true"/>
	</p:tab>
	</p:tabView>
	<p:messages id="msgProgram" showDetail="true" showSummary="false" autoUpdate="false" closable="true"/>
	</p:panel>
	</p:outputPanel>
	<p:messages id="msgProcess" showDetail="true" showSummary="false" autoUpdate="false" closable="true"/>
</h:form>
<!-- Dialogue Activite -->
<p:dialog  widgetVar="dlgAddActivite"  
					appendTo="@(body)" modal="true" 
					header="#{rchProjetsMsgs.projets_recherche_dialog_ajouter_activite}"
 					id="dlgAddActivite" 
 					resizable="false"
					style="font-size:#{sessionBean.fontSize}px">  	
	<h:form id="dlgFormActivite">
	<p:messages id="msgActiviteDialog" showDetail="true" showSummary="false" autoUpdate="false" closable="true"/>
	<br/>
  	<p:panelGrid  id="panelGridActivite" style="width:100%;margin-bottom:8px;">
           		<p:row    rendered="#{not identifierProjetMB.activerMiseAjours}">
						<p:column style="text-align:right;">	<h:outputText value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_activite}" for="typesActivID"/>	</p:column>
						<p:column colspan="3">						
						<p:selectOneMenu id="typesActivID" 	value="#{identifierProjetMB.selectedActiviteNcId}" style="width:100%;" 
								required="true" requiredMessage="#{rchProjetsMsgs.projet_recherche_datatable_list_column_activite}">
								<f:selectItem itemLabel="#{rchProjetsMsgs.projets_recherche_list_activites_select}"		itemValue="" />
								<f:selectItems value="#{identifierProjetMB.listTypeActivite}" var="y" 	itemLabel="#{y.label}" itemValue="#{y.value}" />
						</p:selectOneMenu>
						</p:column>
				
				</p:row>
				<p:row   rendered="#{identifierProjetMB.activerMiseAjours}">
						<p:column style="text-align:right;">	<h:outputText value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_activite}" />	</p:column>
						<p:column colspan="3">		<h:outputText id ="txtCodeactivite" value="#{identifierProjetMB.codeSelected}" styleClass="value"/>	</p:column>
								
				</p:row>
				<p:row>
						<p:column style="text-align:right;">	<h:outputText value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_description}" for="descript"/>	</p:column>
						<p:column colspan="3">
						<p:inputText id="descript" value="#{identifierProjetMB.activiteProjet.description}"  style="width:100%;" 
						required="true" requiredMessage="#{rchProjetsMsgs.projet_recherche_datatable_list_column_activite}"></p:inputText>
						</p:column>
				</p:row>
				<p:row>
						<p:column style="text-align:right;">	<h:outputText value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_date_debut_previsionelle}" for="datedebact"/>	</p:column>
						<p:column>
								<p:calendar id="datedebact" value="#{identifierProjetMB.activiteProjet.dateDebutPrev}"  pattern="dd/MM/yyyy" required="true"	 
														requiredMessage="#{rchStructureMsgs.structure_recherche_dialog_add_theme_begin_date_required}"/>
						</p:column>
						<p:column style="text-align:right;">	<h:outputText value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_date_fin_previsionnelle}" for="datefinact"/>	</p:column>
						<p:column>
								<p:calendar id="datefinact" value="#{identifierProjetMB.activiteProjet.dateFinPrev}"  pattern="dd/MM/yyyy" required="true"	
														requiredMessage="#{rchStructureMsgs.structure_recherche_dialog_add_theme_end_date_required}"/>
						</p:column>
				</p:row>
				<p:row>
						<p:column style="text-align:right;vertical-align:top;">	<h:outputText value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_date_resultat_attendu}" for="resultActivite"/>	</p:column>
						<p:column colspan="3">
								<p:inputTextarea  id="resultActivite" value="#{identifierProjetMB.activiteProjet.resultatAttendu}"  
								  required="true" requiredMessage="#{rchProjetsMsgs.projet_recherche_datatable_list_column_date_resultat_attendu}" style="width:100%;">
								</p:inputTextarea>
						</p:column>
				</p:row>
		</p:panelGrid>
		<p:toolbar style="margin-bottom:8px;">
				<p:toolbarGroup>
							<p:commandButton id="btnHideAddActiviteDialogID"
							 value="#{rchStructureMsgs.structure_recherche_button_dialog_ajouter_theme_fermer_libelle}" 	
							 type="button" onclick="PF('dlgAddActivite').hide();"  icon="ui-icon-close">
							</p:commandButton>
				</p:toolbarGroup>
		
				<p:toolbarGroup align="right" >			
						
						<p:commandButton id="btnAddActivite" 
							action="#{identifierProjetMB.saveActivite}"  
							icon="ui-icon-plusthick"  
							value = "#{rchStructureMsgs.structure_recherche_button_dialog_ajouter_theme_ajouter_libelle}"
							process="@this :dlgFormActivite" 
							ajax="true" 
							update=":mainForm:tvProjet:activiteDataTable :mainForm:tvProjet:msgactivites @form" 
							oncomplete="handleUpdateActiviteRequest(xhr, status, args)">
						</p:commandButton>
						
						<!-- :activiteDataTable :mainForm :tvProjet   projetPanelDetails update=":mainForm:tvStructure:structureThemesDataTable :mainForm:tvStructure:msgThemes @form" oncomplete="handleUpdateThemeRequest(xhr, status, args) -->
				</p:toolbarGroup>
				
			
	</p:toolbar>
		
</h:form>
<script type="text/javascript">
   								 function handleUpdateActiviteRequest(xhr, status, args) {
	       									 if(args.validationFailed || !args.isValid) {
	            							PF('dlgAddActivite').jq.effect("shake", {times:5}, 100);
	       							 }
	        						else {
	           			 					PF('dlgAddActivite').hide();
	       							 }
    							}
	</script>
</p:dialog>			
<p:dialog  widgetVar="dlgAddPartenaires"  
					appendTo="@(body)" modal="true" 
					header="#{rchProjetsMsgs.projets_recherche_dialog_ajouter_partenaire_projet}"
 					id="dlgAddPartenaires" 
 					resizable="false"
					style="font-size:#{sessionBean.fontSize}px">  	
	<h:form id="dlgFormPartenaires">
	<p:messages id="msgPartenaireDialog" showDetail="true" showSummary="false" autoUpdate="false" closable="true"/>
	<br />
  	<p:panelGrid  id="panelGridPartenaire" style="width:100%;margin-bottom:8px;">
           		<p:row   rendered="#{not identifierProjetMB.activerMiseAjours}">
						<p:column style="text-align:right;">	<h:outputText value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_partenaire}" for="TypesPartenaireID" />	</p:column>
						<p:column colspan="3">						
						<p:selectOneMenu id="TypesPartenaireID" 	value="#{identifierProjetMB.selectedPartenaireProjetId}" style="width:200%;" 
								required="true" requiredMessage="#{rchProjetsMsgs.projet_recherche_datatable_list_column_partenaire}">
								<f:selectItem itemLabel="#{rchProjetsMsgs.projets_recherche_list_partenaires_select}"		itemValue="" />
								<f:selectItems value="#{identifierProjetMB.listTypePartenaireProjet}" var="y" 	itemLabel="#{y.label}" itemValue="#{y.value}" />
						</p:selectOneMenu>
						</p:column>				
				</p:row>
				<p:row   rendered="#{identifierProjetMB.activerMiseAjours}">
						<p:column style="text-align:right;">	<h:outputText value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_partenaire}" for="TypesPartenaireID" />	</p:column>
						<p:column colspan="3">	<h:outputText id ="txtCodepartenairer" value="#{identifierProjetMB.codeSelected}" styleClass="value"/>	</p:column>
								
				</p:row>
				
				
				<p:row>
						<p:column style="text-align:right;">	<h:outputText value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_description}" for="designPartenaire"/>	</p:column>
						<p:column colspan="3">
						<p:inputText id="designPartenaire" value="#{identifierProjetMB.partenaireProjet.description}" 
						
						required="true" requiredMessage="#{rchProjetsMsgs.projet_recherche_datatable_list_column_description}" style="width:100%;"></p:inputText>
						</p:column>
				</p:row>
		</p:panelGrid>
		<p:toolbar style="margin-bottom:8px;">
				<p:toolbarGroup>
							<p:commandButton id="btnHideAddPartenaireDialogID"
							 value="#{rchStructureMsgs.structure_recherche_button_dialog_ajouter_theme_fermer_libelle}" 	
							 type="button" onclick="PF('dlgAddPartenaires').hide();"  icon="ui-icon-close">
							</p:commandButton>
				</p:toolbarGroup>		
				<p:toolbarGroup align="right" >						
						<p:commandButton id="btnAddPartenaire" 
							action="#{identifierProjetMB.savePartenaire}"  
							icon="ui-icon-plusthick"  
							value = "#{rchStructureMsgs.structure_recherche_button_dialog_ajouter_theme_ajouter_libelle}"
							process="@this :dlgFormPartenaires" 
							ajax="true" 
							update=":mainForm:tvProjet:partenaireProjetDataTable :mainForm:tvProjet:msgpartenaires @form" 
							oncomplete="handleUpdatepartenaireRequest(xhr, status, args)">
						</p:commandButton>
				
				
				</p:toolbarGroup>		
			
	</p:toolbar>		
</h:form>
<script type="text/javascript">
   								 function handleUpdatepartenaireRequest(xhr, status, args) {
	       									 if(args.validationFailed || !args.isValid) {
	            							PF('dlgAddPartenaires').jq.effect("shake", {times:5}, 100);
	       							 }
	        						else {
	           			 					PF('dlgAddPartenaires').hide();
	       							 }
    							}
	</script>
</p:dialog>
			
			
<p:dialog  widgetVar="dlgAddMotcle"  
					appendTo="@(body)" modal="true" 
					header="#{rchProjetsMsgs.projets_recherche_dialog_ajouter_mot_cle}"
 					id="dlgAddMotcle" 
 					resizable="false"
					style="font-size:#{sessionBean.fontSize}px">  	
	<h:form id="dlgFormMotcle">
	<p:messages id="msgMotcleDialog" showDetail="true" showSummary="false" autoUpdate="false" closable="true"/>
	<br />
  	<p:panelGrid  id="panelGridMotcle" style="width:100%;margin-bottom:8px;">
           		<p:row>
						<p:column style="text-align:right;">	<h:outputText value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_mot_cle}" for="TypesMotcleID"/>	</p:column>
						<p:column colspan="3">						
						<p:selectOneMenu id="TypesMotcleID" 	value="#{identifierProjetMB.selectedMotcleId}" style="width:100%;" 
								required="true" requiredMessage="#{rchProjetsMsgs.projet_recherche_datatable_list_column_mot_cle}">
								<f:selectItem itemLabel="#{rchProjetsMsgs.projets_recherche_list_motcle_select}"		itemValue="" />
								<f:selectItems value="#{identifierProjetMB.listMotcle}" var="y" 	itemLabel="#{y.label}" itemValue="#{y.value}" />
						</p:selectOneMenu>
						</p:column>				
				</p:row>				
		</p:panelGrid>
		<p:toolbar style="margin-bottom:8px;">
				<p:toolbarGroup>
							<p:commandButton id="btnHideAddMotcleDialogID"
							 value="#{rchStructureMsgs.structure_recherche_button_dialog_ajouter_theme_fermer_libelle}" 	
							 type="button" onclick="PF('dlgAddMotcleId').hide();"  icon="ui-icon-close">
							</p:commandButton>
				</p:toolbarGroup>		
				<p:toolbarGroup align="right" >
						<p:commandButton id="btnAddMotcle" 
							action="#{identifierProjetMB.saveMotcle}" 
							icon="ui-icon-plusthick"  
							value = "#{rchStructureMsgs.structure_recherche_button_dialog_ajouter_theme_ajouter_libelle}"
							process="@this :dlgFormMotcle" 	
							ajax="true" 						
							
							update=":mainForm:tvProjet:motcleDataTable :mainForm:tvProjet:msgindevaluations @form" 
							oncomplete="handleUpdatemotcleRequest(xhr, status, args)">
						</p:commandButton>
						
				
				
				
				</p:toolbarGroup>		
			
	</p:toolbar>		
</h:form>
<script type="text/javascript">
   								 function handleUpdatemotcleRequest(xhr, status, args) {
	       									 if(args.validationFailed || !args.isValid) {
	            							PF('dlgAddMotcle').jq.effect("shake", {times:5}, 100);
	       							 }
	        						else {
	           			 					PF('dlgAddMotcle').hide();
	       							 }
    							}
	</script>
</p:dialog>
			

			
<p:dialog  widgetVar="dlgAddindEvaluation"  
					appendTo="@(body)" modal="true" 
					header="#{rchProjetsMsgs.projets_recherche_dialog_ajouter_reponse_validation}"
 					id="dlgAddindEvaluation" 
 					resizable="false"
					style="font-size:#{sessionBean.fontSize}px">  	
	<h:form id="dlgFormindEvaluation">
	<p:messages id="msgindevaluationDialog" showDetail="true" showSummary="false" autoUpdate="false" closable="true"/>
	<br />
  	<p:panelGrid  id="panelGridindevaluation" style="width:100%;margin-bottom:8px;">
           		<p:row   rendered="#{not identifierProjetMB.activerMiseAjours}" >
						<p:column style="text-align:right;">	<h:outputText value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_indicateur}" for="TypesindevaluationID"/>	</p:column>
						<p:column colspan="3">	
																	
						<p:selectOneMenu id="TypesindevaluationID" 	value="#{identifierProjetMB.selectedIndicateurId}" style="width:100%;" 
								required="true" requiredMessage="#{rchProjetsMsgs.projet_recherche_datatable_list_column_indicateur}">
								<f:selectItem itemLabel="#{rchProjetsMsgs.projets_recherche_list_indicateur_select}"		itemValue="" />
								<f:selectItems value="#{identifierProjetMB.listindevaluation}" var="y" 	itemLabel="#{y.label}" itemValue="#{y.value}" />
						</p:selectOneMenu>
						</p:column>				
				</p:row>
				<p:row   rendered="#{identifierProjetMB.activerMiseAjours}">
						<p:column style="text-align:right;">	<h:outputText value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_indicateur}" />	</p:column>
						<p:column colspan="3"><h:outputText id ="txtCodeindicateur" value="#{identifierProjetMB.codeSelected}" styleClass="value"/>	</p:column>
								
				</p:row>
				<p:row>
						<p:column style="text-align:right;">	<h:outputText value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_type_appreciation}" for="TypesApprID"/>	</p:column>
						<p:column colspan="3">						
						<p:selectOneMenu id="TypesApprID" 	value="#{identifierProjetMB.selectedTypeAppreciationId}" style="width:100%;" 
								required="true" requiredMessage="#{rchProjetsMsgs.projet_recherche_datatable_list_column_type_appreciation}">
								<f:selectItem itemLabel="#{rchProjetsMsgs.projets_recherche_list_type_appreciation_select}"	itemValue="" />
								<f:selectItems value="#{identifierProjetMB.listTypeAppreciation}" var="y" 	itemLabel="#{y.label}" itemValue="#{y.value}" />
						</p:selectOneMenu>
						</p:column>				
				</p:row>	
				<p:row>
						<p:column style="text-align:right;">	<h:outputText value="#{rchProjetsMsgs.projet_recherche_datatable_list_column_valeur_previsionelle}" />	</p:column>
						<p:column colspan="3">						
						<p:inputText value="#{identifierProjetMB.indEvaluationDto.valeurPrev}"  style="width:100%;"></p:inputText>
						</p:column>				
				</p:row>	
								
		</p:panelGrid>
		<p:toolbar style="margin-bottom:8px;">
				<p:toolbarGroup>
							<p:commandButton id="btnHideAddindevaluationDialogID"
							 value="#{rchStructureMsgs.structure_recherche_button_dialog_ajouter_theme_fermer_libelle}" 	
							 type="button" onclick="PF('dlgAddindEvaluation').hide();"  icon="ui-icon-close">
							</p:commandButton>
				</p:toolbarGroup>		
				<p:toolbarGroup align="right" >
											
					<p:commandButton id="btnsaveindedevaluation" 
							action="#{identifierProjetMB.saveIndevaluation}"  
							icon="ui-icon-plusthick"  
							value = "#{rchStructureMsgs.structure_recherche_button_dialog_ajouter_theme_ajouter_libelle}"
							process="@this :dlgFormindEvaluation" 
							ajax="true" 
							update=":mainForm:tvProjet:indevaluationDataTable :mainForm:tvProjet:msgindevaluations @form" 
							oncomplete="handleUpdateindevaluationRequest(xhr, status, args)">
						</p:commandButton>
					
					
					
								</p:toolbarGroup>		
			
	</p:toolbar>		
</h:form>
<script type="text/javascript">
   								 function handleUpdateindevaluationRequest(xhr, status, args) {
	       									 if(args.validationFailed || !args.isValid) {
	            							PF('dlgAddindEvaluation').jq.effect("shake", {times:5}, 100);
	       							 }
	        						else {
	           			 					PF('dlgAddindEvaluation').hide();
	       							 }
    							}
	</script>
</p:dialog>
			

<!-- SURCHARGE CSS -->
<style type="text/css">
                .ui-selectonemenu-label{
                    width:100% !important;
                }
                .ui-selectonemenu{
                    width:100% !important;
                }
</style>

<!-- AJAX PROGRESS -->
<pe:blockUI target="mainForm" widgetVar="ajaxprogress">
        	<i class="fa fa-spinner fa-spin"></i>
</pe:blockUI>
</ui:define>
</ui:composition>
</html>